{"object":{"name":"swoole_http2_client"},"comment":"异步HTTP2.0客户端","namespace":"","extends":"swoole_client","consts":{"MSG_OOB":{"comment":"读取带外数据","type":"int","value":1},"MSG_PEEK":{"comment":"窥视socket缓存区中的数据。设置MSG_PEEK参数后，recv读取数据不会修改指针，因此下一次调用recv仍然会从上一次的位置起返回数据","type":"int","value":2},"MSG_DONTWAIT":{"comment":"非阻塞接收数据，无论是否有数据都会立即返回","type":"int","value":64},"MSG_WAITALL":{"comment":"阻塞等待直到收到指定长度的数据后返回","type":"int","value":256},"SHUT_RDWR":{"comment":"读写中断","type":"int","value":2},"SHUT_RD":{"comment":"读中断","type":"int","value":0},"SHUT_WR":{"comment":"写中断","type":"int","value":1}},"properties":{"errCode":{"access":"public","type":"int","comment":"错误码","isStatic":false,"value":0},"sock":{"access":"public","type":"int","comment":"此socket的文件描述符","isStatic":false,"value":0},"reuse":{"access":"public","type":"boolean","comment":"表示此连接是新创建的还是复用已存在的","isStatic":false,"value":false},"reuseCount":{"access":"public","type":"int","comment":"表示此连接复用次数","isStatic":false,"value":0},"type":{"access":"public","type":"int","comment":"连接的类型","isStatic":false,"value":0},"id":{"access":"public","type":"int","comment":"客户端连接ID","isStatic":false},"setting":{"access":"public","type":"array","comment":"配置选项","isStatic":false},"onConnect":{"access":"public","type":"callable","comment":"连接的回调函数","isStatic":false},"onError":{"access":"public","type":"callable","comment":"发生错误时的回调函数","isStatic":false},"onReceive":{"access":"public","type":"callable","comment":"客户端收到来自于服务器端的数据时会回调此函数","isStatic":false},"onClose":{"access":"public","type":"callable","comment":"连接被关闭时回调此函数","isStatic":false},"onBufferFull":{"access":"public","type":"callable","comment":"当缓存区达到最高水位时触发此事件","isStatic":false},"onBufferEmpty":{"access":"public","type":"callable","comment":"当缓存区低于最低水位线时触发此事件","isStatic":false},"onSSLReady":{"access":"public","type":"callable","comment":"当SSL连接就绪时的回调函数","isStatic":false},"requestHeaders":{"access":"public","type":"array","comment":"请求头","isStatic":false},"cookies":{"access":"public","type":"array","comment":"请求响应的cookie","isStatic":false}},"methods":{"__construct":{"access":"public","comment":"客户端连接初始化","isStatic":false,"return":"","example":"","parameters":{"host":{"comment":"连接的主机IP","type":"string","options":[]},"port":{"comment":"连接的主机端口","type":"int","options":[]},"ssl":{"comment":"是否开启TLS\/SSL隧道加密，https网站必须设置为true","type":"boolean","options":[]}}},"__destruct":{"access":"public","comment":"析构函数","isStatic":false,"return":"","example":"","parameters":[]},"setHeaders":{"access":"public","comment":"设置请求头","isStatic":false,"return":"","example":"","parameters":{"headers":{"comment":"请求头","type":"array","options":[]}}},"setCookies":{"access":"public","comment":"设置cookie","isStatic":false,"return":"","example":"","parameters":{"cookies":{"comment":"cookie数组","type":"array","options":[]}}},"get":{"access":"public","comment":"发起GET请求","isStatic":false,"return":"","example":"","parameters":{"path":{"comment":"请求路径","type":"string","options":[]},"callback":{"comment":"请求成功后的回调函数","type":"callable","options":[]}}},"post":{"access":"public","comment":"发送POST请求","isStatic":false,"return":"","example":"","parameters":{"path":{"comment":"请求地址","type":"string","options":[]},"data":{"comment":"求的包体数据，如果$data为数组底层自动会打包为x-www-form-urlencoded格式的POST内容，并设置Content-Type为application\/x-www-form-urlencoded","type":"mixed","options":[]},"callback":{"comment":"请求成功后的回调","type":"callable","options":[]}}},"onConnect":{"access":"public","comment":"连接成功后回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"onError":{"access":"public","comment":"发生错误时的回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"onReceive":{"access":"public","comment":"接收到数据时的回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"onClose":{"access":"public","comment":"关闭连接时的回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"openStream":{"access":"public","comment":"打开数据流时的回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"push":{"access":"public","comment":"向WebSocket服务器发送数据","isStatic":false,"return":"","example":"","parameters":{"data":{"comment":"要发送的数据内容，默认为UTF-8文本格式，如果为其他格式编码或二进制数据，请使用WEBSOCKET_OPCODE_BINARY","type":"string","options":[]},"opcode":{"comment":"操作类型，默认为WEBSOCKET_OPCODE_TEXT_FRAME表示发送文本","type":"int","options":[]},"finish":{"comment":"发送成功后是否结束","type":"boolean","options":[]}}},"closeStream":{"access":"public","comment":"关闭数据流时的回调函数","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"连接成功后的回调","type":"callable","options":[]}}},"set":{"access":"public","comment":"设置客户端参数","isStatic":false,"return":"","example":"","parameters":{"settings":{"comment":"设置的参数","type":"array","options":[]}}},"connect":{"access":"public","comment":"连接远程服务器","isStatic":false,"return":"","example":"","parameters":{"host":{"comment":"是远程服务器的地址，1.9.24或更高版本已支持自动异步解析域名，$host可直接传入域名","type":"string","options":[]},"port":{"comment":"是远程服务器端口","type":"int","options":[]},"timeout":{"comment":"是网络IO的超时，包括connect\/send\/recv，单位是s，支持浮点数。默认为0.5s，即500ms","type":"float","options":[]},"sock_flag":{"comment":"在UDP类型时表示是否启用udp_connect 设定此选项后将绑定$host与$port，此UDP将会丢弃非指定host\/port的数据包;","type":"int","options":[]}}},"recv":{"access":"public","comment":"从服务器端接收数据","isStatic":false,"return":"string","example":"","parameters":{"size":{"comment":"接收数据的缓存区最大长度，此参数不要设置过大，否则会占用较大内存","type":"int","options":[]},"flag":{"comment":"是否等待所有数据到达后返回","type":"boolean","options":[]}}},"send":{"access":"public","comment":"发送数据到远程服务器","isStatic":false,"return":"","example":"","parameters":{"data":{"comment":"要发送的数据","type":"string","options":[]},"flag":{"comment":"是否等待所有数据到达后返回","type":"boolean","options":[]}}},"pipe":{"access":"public","comment":"将客户端收到的数据重定向到另外一个文件描述符，可以是服务器的连接fd、stream资源、sockets资源、其他Swoole_Client、Swoole_Process的管道","isStatic":false,"return":"","example":"","parameters":{"dst_socket":{"comment":"目标文件描述符","type":"int","options":[]}}},"sendfile":{"access":"public","comment":"向服务器发送文件","isStatic":false,"return":"boolean","example":"","parameters":{"filename":{"comment":"指定要发送文件的路径","type":"string","options":[]},"offset":{"comment":"上传文件的偏移量，可以指定从文件的中间部分开始传输数据。此特性可用于支持断点续传","type":"int","options":[]},"length":{"comment":"发送数据的尺寸，默认为整个文件的尺寸","type":"int","options":[]}}},"sendto":{"access":"public","comment":"向任意主机发送UDP数据包","isStatic":false,"return":"boolean","example":"","parameters":{"ip":{"comment":"目标主机的IP地址，支持IPv4\/IPv6","type":"string","options":[]},"port":{"comment":"目标主机端口","type":"int","options":[]},"data":{"comment":"要发送的数据内容，不得超过64K","type":"string","options":[]}}},"sleep":{"access":"public","comment":"调用此方法会从事件循环中移除当前socket的可读监听，停止接收数据","isStatic":false,"return":"","example":"","parameters":[]},"wakeup":{"access":"public","comment":"调用此方法会重新监听可读事件，将socket连接从睡眠中唤醒","isStatic":false,"return":"","example":"","parameters":[]},"pause":{"access":"public","comment":"停止接收数据","isStatic":false,"return":"","example":"","parameters":[]},"resume":{"access":"public","comment":"恢复数据接收。与pause方法成对使用","isStatic":false,"return":"","example":"","parameters":[]},"enableSSL":{"access":"public","comment":"动态开启SSL隧道加密。客户端在建立连接时使用明文通信，中途希望改为SSL隧道加密通信，可以使用enableSSL方法来实现","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"启用后的回调函数","type":"callable","options":[]}}},"getPeerCert":{"access":"public","comment":"获取服务器端证书信息","isStatic":false,"return":"string | bool","example":"","parameters":[]},"verifyPeerCert":{"access":"public","comment":"验证服务端证书信息","isStatic":false,"return":"","example":"","parameters":[]},"isConnected":{"access":"public","comment":"连接是否成功","isStatic":false,"return":"boolean","example":"","parameters":[]},"getsockname":{"access":"public","comment":"用于获取客户端socket的本地host:port，必须在连接之后才可以使用","isStatic":false,"return":"","example":"","parameters":[]},"getpeername":{"access":"public","comment":"获取对端socket的IP地址和端口","isStatic":false,"return":"","example":"","parameters":[]},"close":{"access":"public","comment":"关闭连接","isStatic":false,"return":"","example":"","parameters":{"force":{"comment":"表示强制关闭连接，可用于关闭SWOOLE_KEEP长连接","type":"boolean","options":[]}}},"on":{"access":"public","comment":"绑定事件","isStatic":false,"return":"","example":"","parameters":{"event_name":{"comment":"事件名称","type":"string","options":[]},"callback":{"comment":"事件对应的回调函数","type":"callable","options":[]}}}}}