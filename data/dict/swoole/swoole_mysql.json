{"object":{"name":"swoole_mysql"},"comment":"异步MySQL客户端","namespace":"","consts":{"STATE_QUERY":{"comment":"查询状态","type":"int","value":0},"STATE_READ_START":{"comment":"读开始状态","type":"int","value":1},"STATE_READ_FIELD ":{"comment":"读失败状态","type":"int","value":2},"STATE_READ_ROW":{"comment":"读数据行状态","type":"int","value":3},"STATE_READ_END":{"comment":"读完成状态","type":"int","value":4},"STATE_CLOSED":{"comment":"关闭状态","type":"int","value":5}},"properties":{"serverInfo":{"access":"public","type":"array","comment":"连接信息，保存的是传递给构造函数的数组","isStatic":false},"sock":{"access":"public","type":"int","comment":"连接使用的文件描述符","isStatic":false},"connected":{"access":"public","type":"boolean","comment":"是否连接上了MySQL服务器","isStatic":false,"value":false},"errno":{"access":"public","type":"int","comment":"错误码","isStatic":false,"value":0},"connect_errno":{"access":"public","type":"int","comment":"连接错误码","isStatic":false,"value":0},"error":{"access":"public","type":"string","comment":"错误信息","isStatic":false},"connect_error":{"access":"public","type":"string","comment":"连接错误信息","isStatic":false},"insert_id":{"access":"public","type":"int","comment":"最后一个插入的记录id","isStatic":false},"affected_rows":{"access":"public","type":"int","comment":"影响的行数","isStatic":false},"onConnect":{"access":"public","type":"callable","comment":"连接时的回调函数","isStatic":false},"onClose":{"access":"public","type":"callable","comment":"关闭连接时的回调函数","isStatic":false}},"methods":{"__construct":{"access":"public","comment":"mysql异步客户端初始化","isStatic":false,"return":"","example":"","parameters":[]},"__destruct":{"access":"public","comment":"析构函数","isStatic":false,"return":"","example":"","parameters":[]},"connect":{"access":"public","comment":"连接mysql服务器","isStatic":false,"return":"","example":"$server = array(\n    'host' => '192.168.56.102',\n    'user' => 'test',\n    'password' => 'test',\n    'database' => 'test',\n    'charset' => 'utf8',\n);\n回调函数：function onConnect(swoole_mysql $db, bool $result);","parameters":{"server_config":{"comment":"连接配置信息","type":"array","options":[]},"callback":{"comment":"连接成功的回调","type":"callable","options":[]}}},"begin":{"access":"public","comment":"启动事务","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"启动一个MySQL事务，事务启动成功会回调指定的函数","type":"callable","options":[]}}},"commit":{"access":"public","comment":"提交事务","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"提交事务，当服务器返回响应时回调此函数","type":"callable","options":[]}}},"rollback":{"access":"public","comment":"回滚事务(必须先调用begin启动事务才能调用rollback否则底层会抛出异常)","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"回滚完成后执行的回调","type":"callable","options":[]}}},"query":{"access":"public","comment":"执行sql语句","isStatic":false,"return":"","example":"\n回调函数：function onSQLReady(swoole_mysqli $link, mixed $result);\n注：执行失败，$result为false，读取$link对象的error属性获得错误信息，errno属性获得错误码\n执行成功，SQL为非查询语句，$result为true，读取$link对象的affected_rows属性获得影响的行数，insert_id属性获得Insert操作的自增ID\n执行成功，SQL为查询语句，$result为结果数组","parameters":{"sql":{"comment":"要执行的SQL语句","type":"string","options":[]},"callback":{"comment":"执行成功后会回调此函数","type":"callable","options":[]}}},"close":{"access":"public","comment":"关闭mysql连接","isStatic":false,"return":"","example":"","parameters":[]},"getState":{"access":"public","comment":"获取当前服务器状态","isStatic":false,"return":"int","example":"","parameters":[]},"on":{"access":"public","comment":"设置事件回调函数（目前仅支持onClose事件回调）","isStatic":false,"return":"","example":"","parameters":{"event_name":{"comment":"事件名称(目前仅支持Close)","type":"String","options":[]},"callback":{"comment":"连接关闭时回调此函数","type":"callable","options":[]}}}}}