{"object":{"name":"swoole_process"},"comment":"进程管理模块，用来替代PHP的pcntl扩展","namespace":"","consts":{"IPC_NOWAIT":{"comment":"队列设置为非阻塞","type":"int","value":256}},"properties":{"pipe":{"access":"public","type":"unknown","comment":false,"isStatic":false},"callback":{"access":"public","type":"unknown","comment":false,"isStatic":false},"msgQueueId":{"access":"public","type":"unknown","comment":false,"isStatic":false},"msgQueueKey":{"access":"public","type":"unknown","comment":false,"isStatic":false},"pid":{"access":"public","type":"unknown","comment":false,"isStatic":false},"id":{"access":"public","type":"unknown","comment":false,"isStatic":false}},"methods":{"__construct":{"access":"public","comment":"创建子进程","isStatic":false,"return":"","example":"","parameters":{"callback":{"comment":"子进程创建成功后要执行的函数","type":"callable","options":[]},"redirect_stdin_and_stdout":{"comment":"重定向子进程的标准输入和输出。启用此选项后，在子进程内输出内容将不是打印屏幕，而是写入到主进程管道。读取键盘输入将变为从管道中读取数据。默认为阻塞读取","type":"boolean","options":[]},"pipe_type":{"comment":"是否创建管道，启用$redirect_stdin_stdout后，此选项将忽略用户参数，强制为true。如果子进程内没有进程间通信，可以设置为 false","type":"boolean","options":[]}}},"__destruct":{"access":"public","comment":"析构函数","isStatic":false,"return":"","example":"","parameters":[]},"wait":{"access":"public","comment":"回收结束运行的子进程。","isStatic":true,"return":"","example":"","parameters":{"blocking":{"comment":"指定是否阻塞等待，默认为阻塞","type":"boolean","options":[]}}},"signal":{"access":"public","comment":"设置异步信号监听","isStatic":true,"return":"","example":"","parameters":{"signal_no":{"comment":"信号量","type":"int","options":[]},"callback":{"comment":"回调函数","type":"callable","options":[]}}},"alarm":{"access":"public","comment":"高精度定时器，是操作系统setitimer系统调用的封装，可以设置微秒级别的定时器","isStatic":true,"return":"","example":"","parameters":{"usec":{"comment":"定时器间隔时间，单位为微秒。如果为负数表示清除定时器","type":"int","options":[]}}},"kill":{"access":"public","comment":"向子进程发送信号","isStatic":true,"return":"","example":"","parameters":{"pid":{"comment":"进程ID","type":"int","options":[]},"signal_no":{"comment":"信号量(默认的信号为SIGTERM，表示终止进程)","type":"int","options":[]}}},"daemon":{"access":"public","comment":"使当前进程脱变为一个守护进程","isStatic":true,"return":"","example":"","parameters":{"nochdir":{"comment":"为true表示不要切换当前目录到根目录","type":"boolean","options":[]},"noclose":{"comment":"为true表示不要关闭标准输入输出文件描述符","type":"boolean","options":[]}}},"setaffinity":{"access":"public","comment":"设置CPU亲和性，可以将进程绑定到特定的CPU核上","isStatic":true,"return":"","example":"","parameters":{"cpu_settings":{"comment":"表示绑定哪些CPU核，如array(0,2,3)表示绑定CPU0\/CPU2\/CPU3","type":"array","options":[]}}},"setTimeout":{"access":"public","comment":"设置管道读写操作的超时时间","isStatic":false,"return":"","example":"","parameters":{"seconds":{"comment":"单位为秒，支持浮点型，如1.5表示1s+500ms","type":"double","options":[]}}},"useQueue":{"access":"public","comment":"启用消息队列作为进程间通信","isStatic":false,"return":"boolean","example":"","parameters":{"key":{"comment":"消息队列的key，默认会使用ftok(__FILE__, 1)作为KEY","type":"string","options":[]},"mode":{"comment":"通信模式，默认为2，表示争抢模式，所有创建的子进程都会从队列中取数据","type":"int","options":[]}}},"statQueue":{"access":"public","comment":"查看消息队列状态\n返回字段：\nqueue_num 队列中的任务数量;queue_bytes 队列数据的总字节数","isStatic":false,"return":"array","example":"","parameters":[]},"freeQueue":{"access":"public","comment":"删除队列","isStatic":false,"return":"","example":"","parameters":[]},"start":{"access":"public","comment":"执行fork系统调用，启动进程","isStatic":false,"return":"int","example":"","parameters":[]},"write":{"access":"public","comment":"向管道内写入数据","isStatic":false,"return":"int","example":"","parameters":{"data":{"comment":"写入的数据","type":"string","options":[]}}},"close":{"access":"public","comment":"用于关闭创建的好的管道","isStatic":false,"return":"boolean","example":"","parameters":[]},"read":{"access":"public","comment":"从管道中读取数据","isStatic":false,"return":"string | bool","example":"","parameters":{"size":{"comment":"是缓冲区的大小，默认为8192，最大不超过64K","type":"int","options":[]}}},"push":{"access":"public","comment":"向消息队列推送数据","isStatic":false,"return":"boolean","example":"","parameters":{"data":{"comment":"要投递的数据，长度受限与操作系统内核参数的限制。默认为8192，最大不超过65536","type":"string","options":[]}}},"pop":{"access":"public","comment":"从消息队列中获取数据","isStatic":false,"return":"string","example":"","parameters":{"size":{"comment":"表示获取数据的最大尺寸，默认为8192","type":"int","options":[]}}},"exit":{"access":"public","comment":"退出子进程","isStatic":false,"return":"int","example":"","parameters":{"exit_code":{"comment":"退出进程的状态码，如果为0表示正常结束，会继续执行PHP的shutdown_function，其他扩展的清理工作;如果$status不为0，表示异常退出，会立即终止进程。不再执行PHP的shutdown_function，其他扩展的清理工作","type":"int","options":[]}}},"exec":{"access":"public","comment":"执行一个外部程序，此函数是exec系统调用的封装","isStatic":false,"return":"boolean","example":"","parameters":{"exec_file":{"comment":"指定可执行文件的绝对路径，如 \/usr\/bin\/python","type":"string","options":[]},"args":{"comment":"参数列表，如 array('test.py', 123)，相当与python test.py 123","type":"array","options":[]}}},"name":{"access":"public","comment":"修改进程名称","isStatic":false,"return":"boolean","example":"","parameters":{"process_name":{"comment":"进程名称","type":"string","options":[]}}}}}